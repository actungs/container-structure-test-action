---
name: "Test action"
"on":
  push:

jobs:
  test:
    runs-on: ubuntu-latest
    timeout-minutes: 30
    env:
      image: actungs/test-image:local
    steps:
      - uses: actions/checkout@v4

      - uses: docker/setup-buildx-action@v3

      - uses: docker/build-push-action@v5
        with:
          context: ./test
          load: true
          tags: ${{ env.image }}

      - uses: actungs/container-structure-test-action@feat/implement-action
        with:
          image: ${{ env.image }}
          config_files: ./test/config.yaml
          report_file: report.json

      - run: |
          cat report.json
